# my-dotfiles | Copyright (C) 2021 eth-p
# Repository: https://github.com/eth-p/my-dotfiles

window:
  padding:
    x: 4
    y: 2

font:
  size: 11

  normal:
    family: "JetBrains Mono NL"

  bold:
    family: "JetBrains Mono NL"

  italic:
    family: "JetBrains Mono NL"

  bold_italic:
    family: "JetBrains Mono NL"

scrolling:
  history: 0

colors:
  primary:
    background: '#1c1c1c'
    foreground: '#c8c8c8'
  normal:
    black:   '#1d1f21'
    red:     '#ff6188'
    green:   '#a9dc76'
    yellow:  '#ffd866'
    blue:    '#ab9df2'
    magenta: '#fc9867' # actually... orange
    cyan:    '#78dce8'
    white:   '#c5c5c5'
  bright:
    black:   '#666666'
    red:     '#ff3158'
    green:   '#79ec46'
    yellow:  '#fff836'
    blue:    '#6b6dff'
    magenta: '#ffb837' # actually... orange
    cyan:    '#38efff'
    white:   '#eaeaea'


# -----------------------------------------------------------------------------
# Shell
# -----------------------------------------------------------------------------

env:
  USER_SHELL: fish

shell:
  program: '/usr/bin/env'
  args:
  - 'bash'
  - '-c'
  - |-
    # Append to the PATH.
    PATH="/usr/local/bin:$PATH"
    if [ -d "/opt/homebrew/bin" ]; then PATH="/opt/homebrew/bin:$PATH"; fi

    # Switch the SHELL environment variable to the user's desired shell.
    export SHELL="$USER_SHELL"
    unset USER_SHELL
    SHELL_PATH="$(printf '%q' "$(which "$SHELL" 2>&1 || echo bash)")"
    SHELL_NAME="$(printf '%q' "$(basename -- "$SHELL_PATH")")"

    detached_session_count="$(tmux list-sessions -f '#{?session_attached,,1}' | wc -l)"
    if [ "${detached_session_count}" -eq 1 ]; then
      tmux attach -t "$(tmux list-sessions -f '#{?session_attached,,1}' -F '#{session_id}')" || bash
      exit 0
    fi
    
    # Start a new tmux session for tab and split support.
    SHLVL= SHELL="/bin/sh" tmux new-session "
      tmux unbind d;
      tmux set-option default-shell $SHELL_PATH;
      exec -a -$SHELL_NAME $SHELL_PATH
    " || bash


# -----------------------------------------------------------------------------
# Bindings
# -----------------------------------------------------------------------------

key_bindings:
  - { key: Q, mods: Control, chars: "\u0011" } # Ctrl+Q -> Ctrl+Q

  # Integrations that get forwarded to tmux.
  - { key: C, mods: Command, chars: "\x1B[24;6~c" }
  - { key: J, mods: Command, chars: "\x1B[24;6~j" }
  - { key: K, mods: Command, chars: "\x1B[24;6~k" }
  - { key: O, mods: Command, chars: "\x1B[24;6~o" }
  - { key: S, mods: Command, chars: "\x1B[24;6~s" }

  # Rebind CMD+C to enter tmux copy mode.

  # Rebind CMD+N/CMD+W to use tmux.
  - { key: N, mods: Command, action: CreateNewWindow }
  - { key: T, mods: Command, chars: "\u0001c" }
  - { key: W, mods: Command, chars: "\u0001x" }

  # Rebind CMD+D/CMD+SHIFT+D to use tmux.
  - { key: D, mods: Command,       chars: "\u0001|" } # Vertical split pane.
  - { key: D, mods: Command|Shift, chars: "\u0001-" } # Horizontal split pane.

  # Rebind CMD+[number] to use tmux.
  - { key: 'Key1', mods: Command, chars: "\u00011" }
  - { key: 'Key2', mods: Command, chars: "\u00012" }
  - { key: 'Key3', mods: Command, chars: "\u00013" }
  - { key: 'Key4', mods: Command, chars: "\u00014" }
  - { key: 'Key5', mods: Command, chars: "\u00015" }
  - { key: 'Key6', mods: Command, chars: "\u00016" }
  - { key: 'Key7', mods: Command, chars: "\u00017" }
  - { key: 'Key8', mods: Command, chars: "\u00018" }
  - { key: 'Key9', mods: Command, chars: "\u00019" }

  # Rebind CMD+` to use tmux.
  - { key: Grave, mods: Command,       chars: "\u0001n" }
  - { key: Grave, mods: Command|Shift, chars: "\u0001p" }

  - { key: Grave, mods: Alt|Command,       chars: "\u0001n" } # Workaround using BTT
  - { key: Grave, mods: Alt|Command|Shift, chars: "\u0001p" } # Workaround using BTT

  # ----- Alt Keys ----- 
  - { key: Escape, chars: "\x1B\x1B" }
  - { key: Key1, mods: Alt, chars: "\x1B1" }
  - { key: Key2, mods: Alt, chars: "\x1B2" }
  - { key: Key3, mods: Alt, chars: "\x1B3" }
  - { key: Key4, mods: Alt, chars: "\x1B4" }
  - { key: Key5, mods: Alt, chars: "\x1B5" }
  - { key: Key6, mods: Alt, chars: "\x1B6" }
  - { key: Key7, mods: Alt, chars: "\x1B7" }
  - { key: Key8, mods: Alt, chars: "\x1B8" }
  - { key: Key9, mods: Alt, chars: "\x1B9" }
  - { key: Key0, mods: Alt, chars: "\x1B0" }
  - { key: Minus, mods: Alt, chars: "\x1B-" }
  - { key: Equals, mods: Alt, chars: "\x1B=" }
  - { key: A, mods: Alt, chars: "\x1Ba" }
  - { key: B, mods: Alt, chars: "\x1Bb" }
  - { key: C, mods: Alt, chars: "\x1Bc" }
  - { key: D, mods: Alt, chars: "\x1Bd" }
  - { key: E, mods: Alt, chars: "\x1Be" }
  - { key: F, mods: Alt, chars: "\x1Bf" }
  - { key: G, mods: Alt, chars: "\x1Bg" }
  - { key: H, mods: Alt, chars: "\x1Bh" }
  - { key: I, mods: Alt, chars: "\x1Bi" }
  - { key: J, mods: Alt, chars: "\x1Bj" }
  - { key: K, mods: Alt, chars: "\x1Bk" }
  - { key: L, mods: Alt, chars: "\x1Bl" }
  - { key: M, mods: Alt, chars: "\x1Bm" }
  - { key: N, mods: Alt, chars: "\x1Bn" }
  - { key: O, mods: Alt, chars: "\x1Bo" }
  - { key: P, mods: Alt, chars: "\x1Bp" }
  - { key: Q, mods: Alt, chars: "\x1Bq" }
  - { key: R, mods: Alt, chars: "\x1Br" }
  - { key: S, mods: Alt, chars: "\x1Bs" }
  - { key: T, mods: Alt, chars: "\x1Bt" }
  - { key: U, mods: Alt, chars: "\x1Bu" }
  - { key: V, mods: Alt, chars: "\x1Bv" }
  - { key: W, mods: Alt, chars: "\x1Bw" }
  - { key: X, mods: Alt, chars: "\x1Bx" }
  - { key: Y, mods: Alt, chars: "\x1By" }
  - { key: Z, mods: Alt, chars: "\x1Bz" }
  - { key: Key1, mods: Alt|Shift, chars: "\x1B1" }
  - { key: Key2, mods: Alt|Shift, chars: "\x1B2" }
  - { key: Key3, mods: Alt|Shift, chars: "\x1B3" }
  - { key: Key4, mods: Alt|Shift, chars: "\x1B4" }
  - { key: Key5, mods: Alt|Shift, chars: "\x1B5" }
  - { key: Key6, mods: Alt|Shift, chars: "\x1B6" }
  - { key: Key7, mods: Alt|Shift, chars: "\x1B7" }
  - { key: Key8, mods: Alt|Shift, chars: "\x1B8" }
  - { key: Key9, mods: Alt|Shift, chars: "\x1B9" }
  - { key: Key0, mods: Alt|Shift, chars: "\x1B0" }
  - { key: Minus, mods: Alt|Shift, chars: "\x1B_" }
  - { key: Equals, mods: Alt|Shift, chars: "\x1B+" }
  - { key: A, mods: Alt|Shift, chars: "\x1BA" }
  - { key: B, mods: Alt|Shift, chars: "\x1BB" }
  - { key: C, mods: Alt|Shift, chars: "\x1BC" }
  - { key: D, mods: Alt|Shift, chars: "\x1BD" }
  - { key: E, mods: Alt|Shift, chars: "\x1BE" }
  - { key: F, mods: Alt|Shift, chars: "\x1BF" }
  - { key: G, mods: Alt|Shift, chars: "\x1BG" }
  - { key: H, mods: Alt|Shift, chars: "\x1BH" }
  - { key: I, mods: Alt|Shift, chars: "\x1BI" }
  - { key: J, mods: Alt|Shift, chars: "\x1BJ" }
  - { key: K, mods: Alt|Shift, chars: "\x1BK" }
  - { key: L, mods: Alt|Shift, chars: "\x1BL" }
  - { key: M, mods: Alt|Shift, chars: "\x1BM" }
  - { key: N, mods: Alt|Shift, chars: "\x1BN" }
  - { key: O, mods: Alt|Shift, chars: "\x1BO" }
  - { key: P, mods: Alt|Shift, chars: "\x1BP" }
  - { key: Q, mods: Alt|Shift, chars: "\x1BQ" }
  - { key: R, mods: Alt|Shift, chars: "\x1BR" }
  - { key: S, mods: Alt|Shift, chars: "\x1BS" }
  - { key: T, mods: Alt|Shift, chars: "\x1BT" }
  - { key: U, mods: Alt|Shift, chars: "\x1BU" }
  - { key: V, mods: Alt|Shift, chars: "\x1BV" }
  - { key: W, mods: Alt|Shift, chars: "\x1BW" }
  - { key: X, mods: Alt|Shift, chars: "\x1BX" }
  - { key: Y, mods: Alt|Shift, chars: "\x1BY" }
  - { key: Z, mods: Alt|Shift, chars: "\x1BZ" }
  
  
